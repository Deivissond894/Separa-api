<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>SeparaÃ§Ã£o de Pedidos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="logo-flutuante.png">

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial,sans-serif;background:#f2f4f7}

/* TOPO */
.topo{background:#0B2E5F;text-align:center;padding:15px}
.topo img{max-width:220px}

/* CONTAINER NORMAL */
.container{
  max-width:600px;
  margin:30px auto;
  background:#fff;
  padding:20px;
  border-radius:8px;
}

input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:15px;
  border-radius:6px;
}
input{border:1px solid #ccc}
button{border:none;cursor:pointer}

.btn-relatorio{background:#1F4E8C;color:#fff}
.btn-limpar{background:#C0392B;color:#fff}
.btn-andar{background:#6C3483;color:#fff}
.btn-limpar-hist{background:#C0392B;color:#fff;margin-top:10px}
.btn-ranked{background:#0B5F2E;color:#fff}

/* REFERÃŠNCIA OPERADORES */
.operadores-ref{
  margin-bottom:12px;
  padding:12px;
  background:#f0f2f5;
  border-radius:6px;
  font-size:14px;
}
.operadores-ref strong{
  display:block;
  margin-bottom:6px;
  color:#0B2E5F;
}
.operadores-ref div{line-height:1.5}

/* ðŸ”Ž PESQUISA FIXA NA LATERAL DIREITA */
.pesquisa-wrap{
  position:fixed;
  top:140px;
  right:20px;
  width:260px;
  z-index:1500;
}

/* CARDS */
.cards{margin-top:20px}
.card{
  position:relative;
  padding:14px;
  border-radius:6px;
  margin-top:12px;
  font-size:14px;
}
.separacao{background:#FFD200}
.confirmado{background:#008000;color:#fff}

.timer{margin-top:6px;font-weight:bold}
.info-operador{font-size:13px}
.status-text{font-weight:bold;margin-top:6px}

/* LIXEIRA */
.btn-lixeira{
  position:absolute;
  top:6px;right:6px;
  width:24px;height:24px;
  background:#C0392B;
  color:#fff;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

/* BOTÃƒO TV */
.btn-tv{
  position:fixed;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  width:42px;height:42px;
  border-radius:50%;
  background:#1F4E8C;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  z-index:3000;
}

/* ===== MODO TV ===== */
body.modo-tv{background:#0B2E5F}
body.modo-tv .container > *:not(.cards),
body.modo-tv .info-operador,
body.modo-tv .btn-lixeira,
body.modo-tv .operadores-ref,
body.modo-tv .pesquisa-wrap{display:none}

body.modo-tv .container{
  max-width:100%;
  background:transparent;
  margin:0;
  padding:20px;
}

/* GRID TV */
.tv-grid{display:grid;grid-template-columns:1fr 1fr;gap:30px}
.tv-col{min-height:80vh}
.tv-title{
  color:#fff;
  font-size:3vw;
  font-weight:bold;
  margin-bottom:10px;
  text-align:center;
}
body.modo-tv .card{
  padding:4vh;
  margin-top:3vh;
  border-radius:16px;
  font-size:3vw;
}
body.modo-tv .timer{font-size:2.5vw}
body.modo-tv .status-text{font-size:2.3vw}

/* MODAIS */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.5);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:2000;
}
.modal-content{
  background:#fff;
  width:90%;
  max-width:500px;
  max-height:80vh;
  overflow-y:auto;
  border-radius:8px;
  padding:20px;
}
.modal-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.close{cursor:pointer;font-size:20px;font-weight:bold}

.historico-card{
  background:#e2e3e5;
  padding:12px;
  border-radius:6px;
  margin-top:10px;
}

.ranked-box{background:#f2f2f2;padding:10px;border-radius:6px;margin-top:10px;font-size:15px}

/* INDICADOR OPERADOR */
.operador-ativo{
  font-weight:bold;
  color:#1F4E8C;
  margin-top:6px;
  display:none;
}
</style>
</head>

<body>

<div class="topo">
  <img src="logo-topo.png">
</div>

<div class="container">

  <div class="operadores-ref">
    <strong>ReferÃªncia de Operadores</strong>
    <div>1 - Jhonny</div>
    <div>2 - Jhonatas</div>
    <div>3 - Marcos</div>
    <div>4 - Renato</div>
    <div>5 - Samuel Oliveira</div>
    <div>6 - Samuel Bispo</div>
    <div>7 - Fabio</div>
    <div>8 - Ruan</div>
  </div>

  <input id="usuario" placeholder="NÃºmero do separador (TÃ©rreo)">

  <div id="op-ativo-n1" class="operador-ativo">
    Separador ativo: <span id="nome-n1"></span>
  </div>

  <input id="scanner" placeholder="Aguardando bipe..." disabled>

  <button class="btn-relatorio" onclick="abrirHistorico()">Ver relatÃ³rio</button>
  <button class="btn-ranked" onclick="abrirRanked()">Ranking</button>
  <button class="btn-andar" onclick="abrirAndar()">Primeiro andar</button>
  <button class="btn-limpar" onclick="limparPedidos()">Limpar pedidos ativos</button>

  <div class="cards" id="cards"></div>
</div>

<div class="pesquisa-wrap">
  <input id="pesquisa" placeholder="Pesquisar pedido ativo">
</div>

<div class="btn-tv" onclick="toggleTV()">ðŸ“º</div>

<!-- MODAL PRIMEIRO ANDAR -->
<div class="modal" id="modalAndar">
  <div class="modal-content">
    <div class="modal-header">
      <strong>Primeiro Andar</strong>
      <span class="close" onclick="fecharAndar()">âœ–</span>
    </div>
    <input id="usuario2" placeholder="NÃºmero do separador (1Âº andar)">
    <div id="op-ativo-n2" class="operador-ativo">
      Separador ativo (1Âº andar): <span id="nome-n2"></span>
    </div>
    <input id="scanner2" placeholder="Aguardando bipe..." disabled>
  </div>
</div>

<!-- MODAL HISTÃ“RICO -->
<div class="modal" id="modalHistorico">
  <div class="modal-content">
    <div class="modal-header">
      <strong>RelatÃ³rio</strong>
      <span class="close" onclick="fecharHistorico()">âœ–</span>
    </div>
    <input id="pesquisaHistorico" placeholder="Pesquisar no relatÃ³rio">
    <div id="listaHistorico"></div>
    <button class="btn-limpar-hist" onclick="limparRelatorio()">Limpar relatÃ³rio</button>
  </div>
</div>

<!-- MODAL RANKING -->
<div class="modal" id="modalRanked">
  <div class="modal-content">
    <div class="modal-header">
      <strong>Ranking Mensal AutomÃ¡tico</strong>
      <span class="close" onclick="fecharRanked()">âœ–</span>
    </div>
    <div id="rankedAtual"></div>
    <div id="rankedHistorico"></div>
    <button class="btn-limpar-hist" onclick="limparRanked()">Zerar ranking</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
import { getFirestore, collection, getDocs, onSnapshot, doc, setDoc, deleteDoc, addDoc, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyAxl_UboOnSPX0uN5-5rXb0T9BWo506yc0",
  authDomain: "separacao-51e82.firebaseapp.com",
  projectId: "separacao-51e82",
  storageBucket: "separacao-51e82.firebasestorage.app",
  messagingSenderId: "43379104986",
  appId: "1:43379104986:web:dc97b02ef8a61fe2e619e3"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Login anÃ´nimo
signInAnonymously(auth).catch(err => console.error("Auth error:", err));

// URL base da API
const API_URL = window.location.origin;

const usuarios = {
  1: "Jhonny", 2: "Jhonatas", 3: "Marcos", 4: "Renato",
  5: "Samuel Oliveira", 6: "Samuel Bispo", 7: "Fabio", 8: "Ruan"
};

const TEMPO_PEDIDO = 20 * 60 * 1000;
const SENHA = "1617";

let pedidos = {};
let relatorio = [];
let ranked = JSON.parse(localStorage.getItem("rankedMes") || "{\"n1\":{},\"n2\":{}}");
let historicoRanked = JSON.parse(localStorage.getItem("rankedHistorico") || "[]");

let operadorAtual = null;
let operador2 = null;

const usuario = document.getElementById("usuario");
const scanner = document.getElementById("scanner");
const usuario2 = document.getElementById("usuario2");
const scanner2 = document.getElementById("scanner2");
const cards = document.getElementById("cards");
const campoPesquisa = document.getElementById("pesquisa");
const campoPesquisaHistorico = document.getElementById("pesquisaHistorico");

const opBoxN1 = document.getElementById("op-ativo-n1");
const nomeN1 = document.getElementById("nome-n1");
const opBoxN2 = document.getElementById("op-ativo-n2");
const nomeN2 = document.getElementById("nome-n2");

// ===== INICIALIZAR LISTENERS DO FIRESTORE =====
onSnapshot(collection(db, "pedidosAtivos"), (snapshot) => {
  pedidos = {};
  snapshot.forEach(doc => {
    pedidos[doc.id] = doc.data();
  });
  render();
});

onSnapshot(query(collection(db, "relatorioPedidos"), orderBy("data", "desc")), (snapshot) => {
  relatorio = [];
  snapshot.forEach(doc => {
    relatorio.push(doc.data());
  });
});

// PESQUISAS
campoPesquisa.addEventListener("input", render);
campoPesquisaHistorico.addEventListener("input", renderHistorico);

// ===== TÃ‰RREO =====
usuario.addEventListener("input", () => {
  const nome = usuarios[usuario.value];
  if (nome) {
    operadorAtual = nome;
    nomeN1.innerText = nome;
    opBoxN1.style.display = "block";
    usuario.value = "";
    scanner.disabled = false;
    scanner.focus();
  }
});

scanner.addEventListener("keydown", async (e) => {
  if (e.key === "Enter") {
    const c = scanner.value.trim();
    scanner.value = "";
    if (!c || !operadorAtual) return;

    const agora = Date.now();
    
    if (!pedidos[c]) {
      // 1Âº bip: comeÃ§a em "separacao"
      await setDoc(doc(db, "pedidosAtivos", c), {
        status: "separacao",
        iniciou: operadorAtual,
        separadores: [operadorAtual]
      });
      await addDoc(collection(db, "relatorioPedidos"), {
        pedido: c,
        tipo: "n1",
        operador: operadorAtual,
        data: agora
      });
    } else {
      // 2Âº bip: muda para "confirmado"
      const statusAtual = pedidos[c].status;
      const separadoresAtuais = pedidos[c].separadores || [];
      
      if (statusAtual === "separacao") {
        // separacao â†’ confirmado
        await setDoc(doc(db, "pedidosAtivos", c), {
          status: "confirmado",
          finalizou: operadorAtual,
          separadores: [...separadoresAtuais, operadorAtual]
        }, { merge: true });
        
        // Adiciona pontuaÃ§Ã£o
        const iniciouOp = pedidos[c].iniciou;
        ranked.n1[iniciouOp] = (ranked.n1[iniciouOp] || 0) + 1;
        if (iniciouOp !== operadorAtual) {
          ranked.n1[operadorAtual] = (ranked.n1[operadorAtual] || 0) + 1;
        }
        salvarRanking();
      } else if (statusAtual === "confirmado") {
        // confirmado â†’ separacao (volta) - muda o "iniciou" para o operador atual
        await setDoc(doc(db, "pedidosAtivos", c), {
          status: "separacao",
          finalizou: null,
          iniciou: operadorAtual,
          separadores: [...separadoresAtuais, operadorAtual]
        }, { merge: true });
        
        // NÃƒO registra novo evento - mantÃ©m sÃ³ o 2Âº evento
      }
      
      if (statusAtual !== "confirmado") {
        await addDoc(collection(db, "relatorioPedidos"), {
          pedido: c,
          tipo: "n1",
          operador: operadorAtual,
          data: agora
        });
      }
    }

    operadorAtual = null;
    opBoxN1.style.display = "none";
    scanner.disabled = true;
  }
});

// ===== PRIMEIRO ANDAR =====
function abrirAndar() {
  document.getElementById("modalAndar").style.display = "flex";
}
function fecharAndar() {
  document.getElementById("modalAndar").style.display = "none";
}

usuario2.addEventListener("input", () => {
  const nome = usuarios[usuario2.value];
  if (nome) {
    operador2 = nome;
    nomeN2.innerText = nome;
    opBoxN2.style.display = "block";
    usuario2.value = "";
    scanner2.disabled = false;
    scanner2.focus();
  }
});

scanner2.addEventListener("keydown", async (e) => {
  if (e.key === "Enter") {
    const c = scanner2.value.trim();
    scanner2.value = "";
    if (!c || !operador2) return;

    const agora = Date.now();

    if (!pedidos[c]) {
      await setDoc(doc(db, "pedidosAtivos", c), {
        status: "separacao"
      });
    }

    // Verificar e atualizar status/pontuaÃ§Ã£o baseado no estado do andar2
    if (!pedidos[c].andar2 || !pedidos[c].andar2.finalizou) {
      // 1Âº bip do andar2: marca como iniciado
      await setDoc(doc(db, "pedidosAtivos", c), {
        andar2: { 
          inicio: operador2,
          finalizou: null,
          jaPontuou: false
        }
      }, { merge: true });
    } else {
      // 2Âº+ bip do andar2: marca como confirmado e pontuaÃ§Ã£o
      const inicioAndar = pedidos[c].andar2.inicio;
      ranked.n2[inicioAndar] = (ranked.n2[inicioAndar] || 0) + 1;
      if (inicioAndar !== operador2) {
        ranked.n2[operador2] = (ranked.n2[operador2] || 0) + 1;
      }
      salvarRanking();

      await setDoc(doc(db, "pedidosAtivos", c), {
        andar2: { 
          inicio: inicioAndar,
          finalizou: operador2,
          jaPontuou: true
        }
      }, { merge: true });
    }

    // Se pedido estava confirmado, volta para separaÃ§Ã£o
    if (pedidos[c] && pedidos[c].status === "confirmado") {
      await setDoc(doc(db, "pedidosAtivos", c), {
        status: "separacao"
      }, { merge: true });
    }

    await addDoc(collection(db, "relatorioPedidos"), {
      pedido: c,
      tipo: "n2",
      operador: operador2,
      data: agora
    });

    operador2 = null;
    opBoxN2.style.display = "none";
    scanner2.disabled = true;
  }
});

// ===== RENDER =====
function render() {
  cards.innerHTML = "";
  const modoTV = document.body.classList.contains("modo-tv");
  const filtro = campoPesquisa.value.trim();

  if (modoTV) window.scrollTo({ top: 0, behavior: "auto" });

  const lista = Object.entries(pedidos).filter(([c]) => {
    return !filtro || c.includes(filtro);
  });

  if (modoTV) {
    const grid = document.createElement("div");
    grid.className = "tv-grid";

    const colSep = document.createElement("div");
    colSep.className = "tv-col";
    colSep.innerHTML = `<div class="tv-title">Pedidos em SeparaÃ§Ã£o</div>`;

    const colConfirmado = document.createElement("div");
    colConfirmado.className = "tv-col";
    colConfirmado.innerHTML = `<div class="tv-title">Pedidos Confirmados</div>`;

    lista.forEach(([c, p]) => {
      const statusTexto = p.status === "confirmado" ? "Confirmado" : "Em separaÃ§Ã£o";
      const d = document.createElement("div");
      d.className = "card " + p.status;
      d.innerHTML = `
        Pedido: ${c}
        <div class="status-text">Status: ${statusTexto}</div>
      `;
      if (p.status === "separacao") {
        colSep.appendChild(d);
      } else {
        colConfirmado.appendChild(d);
      }
    });

    grid.appendChild(colSep);
    grid.appendChild(colConfirmado);
    cards.appendChild(grid);
  } else {
    lista.forEach(([c, p]) => {
      const statusTexto = p.status === "confirmado" ? "Confirmado" : "Em separaÃ§Ã£o";
      const d = document.createElement("div");
      d.className = "card " + p.status;
      d.innerHTML = `
        <button class="btn-lixeira" onclick="apagarPedido('${c}')">ðŸ—‘</button>
        Pedido: ${c}
        <div class="status-text">Status: ${statusTexto}</div>
        ${p.iniciou ? `<div class="info-operador">Iniciou: ${p.iniciou}</div>` : ""}
        ${p.finalizou ? `<div class="info-operador">Finalizou: ${p.finalizou}</div>` : ""}
        ${p.andar2 ? `
          <div class="info-operador">1Âº Andar â€” Iniciou: ${p.andar2.inicio}</div>
          ${p.andar2.finalizou ? `<div class="info-operador">1Âº Andar â€” Finalizou: ${p.andar2.finalizou}</div>` : ""}
        ` : ""}
      `;
      cards.appendChild(d);
    });
  }
}

// Expor render globalmente
window.render = render;

// ===== SALVAR RANKING =====
function salvarRanking() {
  localStorage.setItem("rankedMes", JSON.stringify(ranked));
  localStorage.setItem("rankedHistorico", JSON.stringify(historicoRanked));
}

// ===== TIMER =====
setInterval(() => {
  // Timer removido - sem mais contador de 20min
}, 1000);

// ===== HISTÃ“RICO =====
function abrirHistorico() {
  if (prompt("Senha:") !== SENHA) return;
  document.getElementById("modalHistorico").style.display = "flex";
  renderHistorico();
}
function fecharHistorico() {
  document.getElementById("modalHistorico").style.display = "none";
}
function limparRelatorio() {
  if (prompt("Senha:") === SENHA) {
    fetch(`${API_URL}/api/relatorio`, {
      method: 'DELETE',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ senha: SENHA })
    }).then(() => renderHistorico());
  }
}
function renderHistorico() {
  const l = document.getElementById("listaHistorico");
  const filtro = campoPesquisaHistorico.value.trim().toLowerCase();
  l.innerHTML = "";

  const mapa = {};

  relatorio.forEach(r => {
    if (!mapa[r.pedido]) mapa[r.pedido] = { eventos: [] };

    if (r.tipo === "n1") {
      mapa[r.pedido].eventos.push(r);
    }

    if (r.tipo === "n2") {
      mapa[r.pedido].andar2 = r;
    }
  });

  Object.keys(mapa)
    .filter(p => {
      const item = mapa[p];
      return item.eventos.length >= 2 && (!filtro || p.toLowerCase().includes(filtro));
    })
    .forEach(pedido => {
      const d = document.createElement("div");
      d.className = "historico-card";

      const eventos = mapa[pedido].eventos;
      const n2 = mapa[pedido].andar2;
      
      // Pega o primeiro evento (quando entrou em separaÃ§Ã£o)
      const primeiroEvento = eventos[0];
      // Pega o segundo evento (quando foi confirmado)
      const segundoEvento = eventos[1];
      
      // Pega a lista de separadores do pedido (array de todos que tocaram)
      const separadores = eventos.map(e => e.operador).filter((v, i, a) => a.indexOf(v) === i);

      d.innerHTML = `
        Pedido: ${pedido}<br><br>

        ${primeiroEvento ? `
        Primeira SeparaÃ§Ã£o: ${primeiroEvento.operador}<br>
        ${new Date(primeiroEvento.data).toLocaleDateString()} 
        ${new Date(primeiroEvento.data).toLocaleTimeString()}<br><br>
        ` : ""}

        ${segundoEvento ? `
        Confirmado por: ${segundoEvento.operador}<br>
        ${new Date(segundoEvento.data).toLocaleDateString()} 
        ${new Date(segundoEvento.data).toLocaleTimeString()}<br><br>
        ` : ""}

        Separadores envolvidos: ${separadores.join(", ") || "N/A"}<br><br>

        ${n2 ? `
        1Âº Andar: ${n2.operador}<br>
        ${new Date(n2.data).toLocaleDateString()} 
        ${new Date(n2.data).toLocaleTimeString()}
        ` : "Sem participaÃ§Ã£o do 1Âº andar"}
      `;

      l.appendChild(d);
    });
}

// Expor renderHistorico globalmente
window.renderHistorico = renderHistorico;

// ===== UTIL =====
async function apagarPedido(c) {
  if (confirm("Apagar pedido " + c + "?")) {
    await deleteDoc(doc(db, "pedidosAtivos", c));
  }
}

// Listener para evento de apagar pedido
document.addEventListener("apagarPedido", async (e) => {
  const c = e.detail;
  await deleteDoc(doc(db, "pedidosAtivos", c));
});

function limparPedidos() {
  if (prompt("Senha:") === SENHA) {
    fetch(`${API_URL}/api/pedidos-limpar`, {
      method: 'DELETE',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ senha: SENHA })
    }).then(() => render());
  }
}
function toggleTV() {
  document.body.classList.toggle("modo-tv");
  render();
}
</script>

<script>
// FunÃ§Ãµes globais acessÃ­veis do HTML
window.abrirAndar = function() {
  document.getElementById("modalAndar").style.display = "flex";
}
window.fecharAndar = function() {
  document.getElementById("modalAndar").style.display = "none";
}
window.abrirHistorico = function() {
  if (prompt("Senha:") !== "1617") return;
  document.getElementById("modalHistorico").style.display = "flex";
  window.renderHistorico();
}
window.fecharHistorico = function() {
  document.getElementById("modalHistorico").style.display = "none";
}
window.limparRelatorio = function() {
  if (prompt("Senha:") === "1617") {
    fetch(window.location.origin + "/api/relatorio", {
      method: 'DELETE',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ senha: "1617" })
    }).then(() => window.renderHistorico());
  }
}
window.apagarPedido = function(c) {
  if (confirm("Apagar pedido " + c + "?")) {
    // SerÃ¡ executado pela funÃ§Ã£o no mÃ³dulo
    const event = new CustomEvent("apagarPedido", { detail: c });
    document.dispatchEvent(event);
  }
}
window.limparPedidos = function() {
  if (prompt("Senha:") === "1617") {
    fetch(window.location.origin + "/api/pedidos-limpar", {
      method: 'DELETE',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ senha: "1617" })
    }).then(() => window.render());
  }
}
window.toggleTV = function() {
  document.body.classList.toggle("modo-tv");
  window.render();
}
window.abrirRanked = function() {
  if(prompt("Senha:")!=="1617") return;
  document.getElementById("modalRanked").style.display="flex";
  window.renderRanked();
}
window.fecharRanked = function() {
  document.getElementById("modalRanked").style.display="none";
}
window.limparRanked = function() {
  if(prompt("Senha:")!=="1617") {
    return;
  }
  ranked={ n1:{}, n2:{} };
  localStorage.setItem("rankedMes", JSON.stringify(ranked));
  window.renderRanked();
}
window.listarRank = function(obj){
  let html="<div class='ranked-box'>";
  const lista=Object.entries(obj).sort((a,b)=>b[1]-a[1]);
  lista.forEach(([nome,pontos])=> html+=`${nome}: ${pontos}<br>`);
  html+="</div>";
  return html;
}
window.renderRanked = function(){
  const box=document.getElementById("rankedAtual");
  const hist=document.getElementById("rankedHistorico");

  box.innerHTML=`
    <h3>MÃªs Atual â€” TÃ©rreo</h3>
    ${window.listarRank(ranked.n1)}
    <h3>MÃªs Atual â€” 1Âº Andar</h3>
    ${window.listarRank(ranked.n2)}
  `;

  hist.innerHTML="<h3>HistÃ³rico Mensal</h3>";

  historicoRanked.forEach(reg=>{
    hist.innerHTML+=`
      <div class="ranked-box">
        <strong>${reg.mes}</strong><br><br>
        <u>TÃ©rreo</u><br>${window.listarRank(reg.ranking.n1)}
        <u>1Âº Andar</u><br>${window.listarRank(reg.ranking.n2)}
      </div>
    `;
  });
}
</script>

</body>
</html>
